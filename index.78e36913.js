!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},o=t.parcelRequired7c6;null==o&&((o=function(t){if(t in e)return e[t].exports;if(t in n){var o=n[t];delete n[t];var i={id:t,exports:{}};return e[t]=i,o.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){n[t]=e},t.parcelRequired7c6=o);var i=o("dIxxU");const r="https://api.themoviedb.org/3/",s="a59dfea75e9e40e203f0819879862061";class a{async getMovieByName(){const t=`${r}search/movie?api_key=${s}&query=${this.searchQuary}&page=${this.page}&language=${this.lang}&include_adult=false`;return(await i.default.get(t)).data}async getPopularFilms(){const t=`${r}/trending/movie/day?api_key=${s}&language=${this.lang}`;return(await i.default.get(t)).data}async getInfoByMovieId(){const t=`${r}movie/${this.movieId}?api_key=${s}&language=${this.lang}`;return(await i.default.get(t)).data}async getMovieGenres(){const t=`${r}genre/movie/list?api_key=${s}`;return(await i.default.get(t)).data}incrementPage(){this.page+=1}decrementPage(){this.page-=1}resetPage(){this.page=1}get quary(){return this.searchQuary}set quary(t){this.searchQuary=t}constructor(){this.searchQuary="",this.page=1,this.movieId="",this.lang="en-US"}}const c=new a,d="data-genresArr";function u(t){let e=[];return function(){try{if(localStorage.getItem(d)){return JSON.parse(localStorage.getItem(d))}return}catch{return!1}}().map((({id:n,name:o})=>{t.map((t=>{t===n&&e.push(o)}))})),e}!async function(){try{const{genres:t}=await c.getMovieGenres();!function(t){try{localStorage.setItem(d,JSON.stringify(t))}catch{return!1}}(t)}catch(t){console.log(t.message)}}(),o("bvnla"),o("dN6xn"),o("gyo0n"),o("cDXQO");var l=o("gyo0n"),h=o("dN6xn"),f=o("bvnla");const g=document.querySelector(".backdrop"),m="js-watched-modal",p="js-queue-modal",b="reviewed",v="in your turn";function y(t){const e={btn_watched:document.querySelector(".btn_watched"),btn_queue:document.querySelector(".btn_queue")};h.toWatched.getWatchedOne(t)&&h.toWatched.getWatchedOne(t).length>0&&w(e.btn_watched),f.toQueue.getQueueOne(t)&&f.toQueue.getQueueOne(t).length>0&&x(e.btn_queue)}function w(t){t.classList.add(m),t.textContent=b}function x(t){t.classList.add(p),t.textContent=v}function L(t){t.classList.remove(m),t.textContent="add to watched"}function C(t){t.classList.remove(p),t.textContent="add to queue"}g.addEventListener("click",(function(t){const e=+t.target.dataset.id,n={btn_watched:document.querySelector(".btn_watched"),btn_queue:document.querySelector(".btn_queue")};if(t.target.classList.contains("btn_watched"))if(!h.toWatched.getWatchedOne(e)||h.toWatched.getWatchedOne(e).length<1){h.toWatched.setWatchedOne(...(0,l.getLocalOne)(e)),w(n.btn_watched);try{void 0!==f.toQueue.getQueueAll()&&f.toQueue.getQueueOne(e).length>0&&(f.toQueue.removeQueueOneEl(e),C(n.btn_queue))}finally{return}}else h.toWatched.removeWatchedOneEl(e),L(n.btn_watched);if(t.target.classList.contains("btn_queue"))if(!f.toQueue.getQueueOne(e)||f.toQueue.getQueueOne(e).length<1){f.toQueue.setQueueOne(...(0,l.getLocalOne)(e)),x(n.btn_queue);try{void 0!==h.toWatched.getWatchedAll&&h.toWatched.getWatchedOne(e).length>0&&(h.toWatched.removeWatchedOneEl(e),L(n.btn_watched))}finally{return}}else f.toQueue.removeQueueOneEl(e),C(n.btn_queue)}));var q=o("8ZNa9"),O=o("diaKp");l=o("gyo0n"),q=o("8ZNa9"),O=o("diaKp"),l=o("gyo0n");function E(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function S(t,e){return n=t,(o=E(t,e,"get")).get?o.get.call(n):o.value;var n,o}function N(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _(t,e,n){N(t,e),e.set(t,n)}function k(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,E(t,e,"set"),n),n}function T(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Q(t,e){N(t,e),e.add(t)}const W=document.createElement("template"),M=String.raw;W.innerHTML=M`
  <style>
    :host {
      all: initial;
      display: block;
      position: absolute;
      top: 0;
      right: 0;
      width: 1px;
    }
    :host button {
      position: fixed;
      bottom: 16px;
      right: 16px;
      cursor: pointer;
    }
    :host([hidden]) button {
      opacity: 0;
      visibility: hidden;
    }
  </style>
  <button type="button" part="button"><slot>Scroll to top</slot></button>
`;var A=new WeakMap,I=new WeakSet,$=new WeakSet,H=new WeakMap;class j extends HTMLElement{get visibleAfter(){return this.getAttribute("visible-after")}set visibleAfter(t){this.setAttribute("visible-after",t)}get smoothScrolling(){return this.hasAttribute("smooth-scrolling")}set smoothScrolling(t){t?this.setAttribute("smooth-scrolling",""):this.removeAttribute("smooth-scrolling")}get topOffset(){return Number(this.getAttribute("top-offset"))||0}set topOffset(t){const e=Number(t)||0;this.setAttribute("top-offset",e>0?e:0)}static get observedAttributes(){return["visible-after"]}attributeChangedCallback(t,e,n){"visible-after"===t&&T(this,$,D).call(this,n)}connectedCallback(){T(this,I,P).call(this,"visibleAfter"),T(this,I,P).call(this,"smoothScrolling"),T(this,I,P).call(this,"topOffset"),this.topOffset||(this.topOffset=0),this.visibleAfter||(this.visibleAfter="50vh"),k(this,A,this.shadowRoot.querySelector("button")),T(this,$,D).call(this,this.visibleAfter);try{this.observer=new IntersectionObserver((([t])=>{this.hidden=t.isIntersecting,S(this,A).part.toggle("button--hidden",t.isIntersecting),this.dispatchEvent(new CustomEvent("scroll-top:visibility-change",{bubbles:!0,composed:!0,detail:{visible:!t.isIntersecting}}))})),this.observer.observe(this)}catch(t){console.error(t)}S(this,A).addEventListener("click",S(this,H))}disconnectedCallback(){this.observer&&(this.observer.disconnect(),this.observer=null),S(this,A).removeEventListener("click",S(this,H))}static defineCustomElement(t="scroll-top"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,j)}constructor(){super(),Q(this,I),Q(this,$),_(this,A,{writable:!0,value:void 0}),_(this,H,{writable:!0,value:t=>{t.preventDefault();const e={top:this.topOffset};this.smoothScrolling&&(e.behavior="smooth"),document.scrollingElement.scrollTo(e)}}),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(W.content.cloneNode(!0))}}function P(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}function D(t){"string"==typeof t&&(this.style.height=t)}const R=document.querySelector(".js-search-form"),B=document.querySelector(".js-card-collection"),G=document.querySelector(".js-error-notify"),K=new a;function U(t){let e=[];return t.map((({poster_path:t,title:n,release_date:o,genre_ids:i,id:r})=>{const s=u(i).join(", "),a={poster_path:t,title:n,filmDate:o.slice(0,4),filmGenres:s,id:r};e.push(a)})),e}function z(){B.innerHTML=""}function F(){G.innerHTML=""}R.addEventListener("submit",(async function(t){t.preventDefault();try{if((0,O.spinerOn)(),K.resetPage(),K.quary=R.query.value.trim(),!K.quary)return G.innerHTML="Search result not successful.",setTimeout(F,3e3),void(0,O.spinerOff)();const{page:t,results:e,total_pages:n,total_results:o}=await K.getMovieByName();if(setTimeout(O.spinerOff,500),0===o)return z(),G.innerHTML="Enter the correct movie name and try again.",void setTimeout(F,3e3);(0,l.addLocal)(e),z(),function(t){const e=(0,q.default)(U(t));B.insertAdjacentHTML("beforeend",e)}(e)}catch(t){(0,O.spinerOff)(),console.log(t.message)}})),j.defineCustomElement(),G.innerHTML="";const Z=document.getElementById("film-cards");document.addEventListener("DOMContentLoaded",(async function(){try{(0,O.spinerOn)();const e=new a,n=await e.getPopularFilms();setTimeout(O.spinerOff,500),t=n.results,Z.innerHTML=(0,q.default)(U(t)),(0,l.addLocal)(n.results)}catch(t){console.log(t.message)}var t})),o("3vKGz");var J=o("3vKGz"),X=(l=o("gyo0n"),o("1cIrP"));function V(){J.refs.backdrop.classList.add("is-hidden"),et()}function Y(t){t.target.classList.contains("modal")&&J.refs.backdrop.classList.add("is-hidden"),et()}function tt(t){"Escape"===t.key&&(J.refs.backdrop.classList.add("is-hidden"),et())}function et(){J.refs.backdrop.classList.contains("is-hidden")&&(J.refs.modalClose.removeEventListener("click",V),J.refs.backdrop.removeEventListener("click",Y),document.removeEventListener("keydown",tt),J.refs.body.classList.remove("disable-scroll"))}document.querySelector(".container").addEventListener("click",(function(t){if(t.preventDefault(),!t.target.classList.contains("card__img"))return;const e=+t.target.dataset.id;J.refs.body.classList.add("disable-scroll"),J.refs.modalClose.addEventListener("click",V),J.refs.backdrop.addEventListener("click",Y),document.addEventListener("keydown",tt),J.refs.backdrop.classList.remove("is-hidden"),J.refs.modalMovie.innerHTML=(0,X.default)((0,l.getLocalOne)(e)),y(e)})),o("diaKp");const nt=document.querySelector('[data-index="1"]'),ot=document.querySelector('[data-index="2"]'),it=document.querySelector('[data-index="3"]'),rt=document.querySelector('[data-index="4"]'),st=document.querySelector('[data-index="5"]'),at=document.querySelector(".first-button"),ct=document.querySelector(".last-button"),dt=document.querySelector(".pagination-container"),ut=document.querySelector(".arrow-right"),lt=document.querySelector(".arrow-left"),ht=document.querySelector("#previous"),ft=document.querySelector("#after");dt.addEventListener("click",(function(t){"BUTTON"===t.target.tagName&&(Number(t.target.textContent)&&(gt=Number(t.target.textContent)),ht.hidden=!0,ft.hidden=!0,t.target.classList.contains("pagination-button")&&(mt.forEach((t=>t.classList.remove("pagination--current"))),t.target.classList.add("pagination--current")),t.target.classList.contains("arrow-right")&&gt<1e3&&(mt.forEach((t=>t.classList.remove("pagination--current"))),nt.classList.add("pagination--current"),nt.textContent=Number(nt.textContent)+5,ot.textContent=Number(ot.textContent)+5,it.textContent=Number(it.textContent)+5,rt.textContent=Number(rt.textContent)+5,st.textContent=Number(st.textContent)+5,gt=nt.textContent),t.target.classList.contains("arrow-left")&&gt>=5&&(mt.forEach((t=>t.classList.remove("pagination--current"))),nt.textContent=Number(nt.textContent)-5,ot.textContent=Number(ot.textContent)-5,it.textContent=Number(it.textContent)-5,rt.textContent=Number(rt.textContent)-5,st.textContent=Number(st.textContent)-5,st.classList.add("pagination--current"),gt=st.textContent),t.target.classList.contains("first-button")&&(mt.forEach((t=>t.classList.remove("pagination--current"))),nt.textContent=1,ot.textContent=2,it.textContent=3,rt.textContent=4,st.textContent=5,nt.classList.add("pagination--current"),gt=nt.textContent,lt.hidden=!0,ht.hidden=!0,at.hidden=!0),t.target.classList.contains("last-button")&&(mt.forEach((t=>t.classList.remove("pagination--current"))),nt.textContent=Number(ct.textContent)-4,ot.textContent=Number(ct.textContent)-3,it.textContent=Number(ct.textContent)-2,rt.textContent=Number(ct.textContent)-1,st.textContent=ct.textContent,st.classList.add("pagination--current"),gt=st.textContent,ut.hidden=!0,ft.hidden=!0,ct.hidden=!0),Number(gt)>5?(lt.hidden=!1,ht.hidden=!1,at.hidden=!1):(lt.hidden=!0,ht.hidden=!0,at.hidden=!0),Number(gt)<996&&(ut.hidden=!1,ft.hidden=!1,ct.hidden=!1),gallery.innerHTML="",window.scrollTo({top:0,behavior:"smooth"}),""!==inputRef.value?movieSearcher(inputRef.value,gt):startPage())}));let gt=1,mt=document.querySelectorAll(".pagination-button");ht.hidden=!0,lt.hidden=!0,at.hidden=!0;o("8ZNa9")}();
//# sourceMappingURL=index.78e36913.js.map
