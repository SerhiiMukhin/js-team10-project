!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r);const i=new(0,(u=r("iSYrk")).default),s="data-genresArr";function l(e){let t=[];return function(){try{if(localStorage.getItem(s)){return JSON.parse(localStorage.getItem(s))}return}catch{return!1}}().map((({id:n,name:o})=>{e.map((e=>{e===n&&t.push(o)}))})),t}var a=r("1VFfL");var c=e(r("WMajR")).template({1:function(e,t,n,o,r){var i,s,l=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <li class='card' data-id='"+u(typeof(s=null!=(s=d(n,"id")||(null!=t?d(t,"id"):t))?s:a)===c?s.call(l,{name:"id",hash:{},data:r,loc:{start:{line:2,column:28},end:{line:2,column:34}}}):s)+"'>\n"+(null!=(i=d(n,"if").call(l,null!=t?d(t,"poster_path"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.program(4,r,0),data:r,loc:{start:{line:3,column:4},end:{line:17,column:11}}}))?i:"")+"    <div class='card__box-info'>\n      <h2 class='card__title'>"+u(typeof(s=null!=(s=d(n,"title")||(null!=t?d(t,"title"):t))?s:a)===c?s.call(l,{name:"title",hash:{},data:r,loc:{start:{line:19,column:30},end:{line:19,column:39}}}):s)+"</h2>\n      <div class='card__data'>\n        "+(null!=(i=d(n,"if").call(l,null!=t?d(t,"genre_ids"):t,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.program(8,r,0),data:r,loc:{start:{line:21,column:8},end:{line:23,column:80}}}))?i:"")+"\n\n        "+(null!=(i=d(n,"if").call(l,null!=t?d(t,"release_date"):t,{name:"if",hash:{},fn:e.program(10,r,0),inverse:e.program(12,r,0),data:r,loc:{start:{line:25,column:8},end:{line:27,column:86}}}))?i:"")+"\n      </div></div>\n  </li>\n"},2:function(e,t,n,o,r){var i,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,a="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      <img\n        class='card__img'\n        src='https://image.tmdb.org/t/p/w500"+c(typeof(i=null!=(i=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?i:l)===a?i.call(s,{name:"poster_path",hash:{},data:r,loc:{start:{line:6,column:44},end:{line:6,column:59}}}):i)+"'\n        alt='"+c(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:l)===a?i.call(s,{name:"title",hash:{},data:r,loc:{start:{line:7,column:13},end:{line:7,column:22}}}):i)+"'\n        data-id='"+c(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:l)===a?i.call(s,{name:"id",hash:{},data:r,loc:{start:{line:8,column:17},end:{line:8,column:23}}}):i)+"'\n      />\n"},4:function(e,t,n,o,r){var i,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,a="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      <img\n        class='card__img'\n        src='https://media.istockphoto.com/id/911590226/uk/%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%BD%D1%96-%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%BD%D1%8F/%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%BD%D0%B0-%D1%96%D0%BB%D1%8E%D1%81%D1%82%D1%80%D0%B0%D1%86%D1%96%D1%8F-%D1%87%D0%B0%D1%81%D1%83-%D1%84%D1%96%D0%BB%D1%8C%D0%BC%D1%83-%D0%BA%D0%BE%D0%BD%D1%86%D0%B5%D0%BF%D1%86%D1%96%D1%8F-%D0%BA%D1%96%D0%BD%D0%BE%D0%BF%D0%BE%D1%81%D1%82%D0%B5%D1%80%D1%83-%D0%BD%D0%B0-%D1%87%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%BE%D0%BC%D1%83-%D0%BA%D1%80%D1%83%D0%B3%D0%BB%D0%BE%D0%BC%D1%83-%D1%82%D0%BB%D1%96.jpg?s=612x612&w=0&k=20&c=xj1wHSzUN8OEHhOo8Xa_Z7FlJLxFXPppehw0-6KnmRs='\n        alt='"+c(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:l)===a?i.call(s,{name:"title",hash:{},data:r,loc:{start:{line:14,column:13},end:{line:14,column:22}}}):i)+"'\n        data-id='"+c(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:l)===a?i.call(s,{name:"id",hash:{},data:r,loc:{start:{line:15,column:17},end:{line:15,column:23}}}):i)+"'\n      />\n"},6:function(e,t,n,o,r){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span\n            class='card__genres'\n          >"+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"genre_ids")||(null!=t?s(t,"genre_ids"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"genre_ids",hash:{},data:r,loc:{start:{line:23,column:11},end:{line:23,column:24}}}):i)+"</span>"},8:function(e,t,n,o,r){return"<p class='card__undefined'>N/A</p>"},10:function(e,t,n,o,r){var i,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span class='card__year'>\n            |\n            "+e.escapeExpression("function"==typeof(i=null!=(i=s(n,"release_date")||(null!=t?s(t,"release_date"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"release_date",hash:{},data:r,loc:{start:{line:27,column:12},end:{line:27,column:28}}}):i)+"</span>"},12:function(e,t,n,o,r){return"<p class='card__undefined'>| N/A</p>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,o,r){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:30,column:9}}}))?i:""},useData:!0}),u=r("iSYrk"),d=r("diaKp"),h=(u=r("iSYrk"),d=r("diaKp"),r("gyo0n"));function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function p(e,t){return n=e,(o=f(e,t,"get")).get?o.get.call(n):o.value;var n,o}function m(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(e,t,n){m(e,t),t.set(e,n)}function v(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,f(e,t,"set"),n),n}function b(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function D(e,t){m(e,t),t.add(e)}const y=document.createElement("template"),w=String.raw;y.innerHTML=w`
  <style>
    :host {
      all: initial;
      display: block;
      position: absolute;
      top: 0;
      right: 0;
      width: 1px;
    }
    :host button {
      position: fixed;
      bottom: 16px;
      right: 16px;
      cursor: pointer;
    }
    :host([hidden]) button {
      opacity: 0;
      visibility: hidden;
    }
  </style>
  <button type="button" part="button"><slot>Scroll to top</slot></button>
`;var _=new WeakMap,O=new WeakSet,B=new WeakSet,E=new WeakMap;class L extends HTMLElement{get visibleAfter(){return this.getAttribute("visible-after")}set visibleAfter(e){this.setAttribute("visible-after",e)}get smoothScrolling(){return this.hasAttribute("smooth-scrolling")}set smoothScrolling(e){e?this.setAttribute("smooth-scrolling",""):this.removeAttribute("smooth-scrolling")}get topOffset(){return Number(this.getAttribute("top-offset"))||0}set topOffset(e){const t=Number(e)||0;this.setAttribute("top-offset",t>0?t:0)}static get observedAttributes(){return["visible-after"]}attributeChangedCallback(e,t,n){"visible-after"===e&&b(this,B,S).call(this,n)}connectedCallback(){b(this,O,k).call(this,"visibleAfter"),b(this,O,k).call(this,"smoothScrolling"),b(this,O,k).call(this,"topOffset"),this.topOffset||(this.topOffset=0),this.visibleAfter||(this.visibleAfter="50vh"),v(this,_,this.shadowRoot.querySelector("button")),b(this,B,S).call(this,this.visibleAfter);try{this.observer=new IntersectionObserver((([e])=>{this.hidden=e.isIntersecting,p(this,_).part.toggle("button--hidden",e.isIntersecting),this.dispatchEvent(new CustomEvent("scroll-top:visibility-change",{bubbles:!0,composed:!0,detail:{visible:!e.isIntersecting}}))})),this.observer.observe(this)}catch(e){console.error(e)}p(this,_).addEventListener("click",p(this,E))}disconnectedCallback(){this.observer&&(this.observer.disconnect(),this.observer=null),p(this,_).removeEventListener("click",p(this,E))}static defineCustomElement(e="scroll-top"){"undefined"==typeof window||window.customElements.get(e)||window.customElements.define(e,L)}constructor(){super(),D(this,O),D(this,B),g(this,_,{writable:!0,value:void 0}),g(this,E,{writable:!0,value:e=>{e.preventDefault();const t={top:this.topOffset};this.smoothScrolling&&(t.behavior="smooth"),document.scrollingElement.scrollTo(t)}}),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(y.content.cloneNode(!0))}}function k(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}}function S(e){"string"==typeof e&&(this.style.height=e)}a=r("1VFfL"),u=r("iSYrk"),d=r("diaKp");const q=new(0,u.default),M=document.querySelector(".js-search-form"),x=document.querySelector(".js-error-notify");const T=document.querySelector(".js-search-form"),C=document.querySelector(".js-card-collection"),A=document.querySelector(".js-error-notify"),P=new(0,u.default);async function W(e){try{if((0,d.spinerOn)(),P.resetPage(),P.quary=T.query.value.trim(),!P.quary)return A.innerHTML="Search result not successful.",setTimeout(Q,3e3),void(0,d.spinerOff)();P.page=e;const{page:t,results:n,total_pages:o,total_results:r}=await P.getMovieByName();if(setTimeout(d.spinerOff,500),0===r)return A.innerHTML="Enter the correct movie name and try again.",void setTimeout(Q,3e3);(0,h.addLocal)(n),C.innerHTML="",function(e){const t=c(j(e));C.insertAdjacentHTML("beforeend",t)}(n)}catch(e){(0,d.spinerOff)(),console.log(e.message)}}function j(e){const t=e.map((e=>(e.genre_ids=l(e.genre_ids).join(", "),e.release_date=e.release_date.slice(0,4),e)));return(0,h.addLocal)(t),t}function Q(){A.innerHTML=""}T.addEventListener("submit",(async function(t){t.preventDefault();try{if((0,d.spinerOn)(),q.resetPage(),q.quary=M.query.value.trim(),!q.quary)return x.innerHTML="Search result not successful.",setTimeout(resetErorrMarkup,3e3),void(0,d.spinerOff)();const{page:t,results:n,total_pages:o,total_results:r}=await q.getMovieByName();if(setTimeout(d.spinerOff,500),0===r)return x.innerHTML="Enter the correct movie name and try again.",void setTimeout(resetErorrMarkup,3e3);const i=document.querySelector("#pagination"),s={totalItems:r,itemsPerPage:20,visiblePages:5,centerAlign:!0},l=new(e(a))(i,s);l.on("beforeMove",(e=>{W(e.page),window.scrollTo({top:0,behavior:"smooth"})})),l.movePageTo(0)}catch(e){(0,d.spinerOff)(),console.log(e.message)}})),L.defineCustomElement(),A.innerHTML="";const H=document.getElementById("film-cards");async function N(e){try{(0,d.spinerOn)();const n=new(0,u.default);n.page=e;const o=await n.getPopularFilms();setTimeout(d.spinerOff,500),t=o.results,H.innerHTML=c(j(t))}catch(e){console.log(e.message)}var t}document.addEventListener("DOMContentLoaded",async function(){try{const{genres:e}=await i.getMovieGenres();!function(e){try{localStorage.setItem(s,JSON.stringify(e))}catch{return!1}}(e)}catch(e){console.log(e.message)}}()),document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector("#pagination"),n={totalItems:2e4,itemsPerPage:20,visiblePages:5,centerAlign:!0},o=new(e(a))(t,n);o.on("beforeMove",(e=>{N(e.page),window.scrollTo({top:0,behavior:"smooth"})})),o.movePageTo(0)}()),r("bvnla"),r("dN6xn"),r("gyo0n"),r("cDXQO");h=r("gyo0n");var F=r("dN6xn"),I=r("bvnla");const K=document.querySelector(".backdrop"),R="js-watched-modal",Y="js-queue-modal",z="reviewed",G="in your turn";function J(e){const t={btn_watched:document.querySelector(".btn_watched"),btn_queue:document.querySelector(".btn_queue")};F.toWatched.getWatchedOne(e)&&F.toWatched.getWatchedOne(e).length>0&&U(t.btn_watched),I.toQueue.getQueueOne(e)&&I.toQueue.getQueueOne(e).length>0&&X(t.btn_queue)}function U(e){e.classList.add(R),e.textContent=z}function X(e){e.classList.add(Y),e.textContent=G}function V(e){e.classList.remove(R),e.textContent="add to watched"}function Z(e){e.classList.remove(Y),e.textContent="add to queue"}K.addEventListener("click",(function(e){const t=+e.target.dataset.id,n={btn_watched:document.querySelector(".btn_watched"),btn_queue:document.querySelector(".btn_queue")};if(e.target.classList.contains("btn_watched"))if(!F.toWatched.getWatchedOne(t)||F.toWatched.getWatchedOne(t).length<1){F.toWatched.setWatchedOne(...(0,h.getLocalOne)(t)),U(n.btn_watched);try{void 0!==I.toQueue.getQueueAll()&&I.toQueue.getQueueOne(t).length>0&&(I.toQueue.removeQueueOneEl(t),Z(n.btn_queue))}finally{return}}else F.toWatched.removeWatchedOneEl(t),V(n.btn_watched);if(e.target.classList.contains("btn_queue"))if(!I.toQueue.getQueueOne(t)||I.toQueue.getQueueOne(t).length<1){I.toQueue.setQueueOne(...(0,h.getLocalOne)(t)),X(n.btn_queue);try{void 0!==F.toWatched.getWatchedAll&&F.toWatched.getWatchedOne(t).length>0&&(F.toWatched.removeWatchedOneEl(t),V(n.btn_watched))}finally{return}}else I.toQueue.removeQueueOneEl(t),Z(n.btn_queue)})),r("3vKGz");var $=r("3vKGz"),ee=(h=r("gyo0n"),r("1cIrP"));function te(){$.refs.backdrop.classList.add("is-hidden"),re()}function ne(e){e.target.classList.contains("modal")&&$.refs.backdrop.classList.add("is-hidden"),re()}function oe(e){"Escape"===e.key&&($.refs.backdrop.classList.add("is-hidden"),re())}function re(){$.refs.backdrop.classList.contains("is-hidden")&&($.refs.modalClose.removeEventListener("click",te),$.refs.backdrop.removeEventListener("click",ne),document.removeEventListener("keydown",oe),$.refs.body.classList.remove("disable-scroll"))}document.querySelector(".container").addEventListener("click",(function(e){if(e.preventDefault(),!e.target.classList.contains("card__img"))return;const t=+e.target.dataset.id;$.refs.body.classList.add("disable-scroll"),$.refs.modalClose.addEventListener("click",te),$.refs.backdrop.addEventListener("click",ne),document.addEventListener("keydown",oe),$.refs.backdrop.classList.remove("is-hidden"),$.refs.modalMovie.innerHTML=(0,ee.default)((0,h.getLocalOne)(t)),J(t)})),r("diaKp"),r("iSYrk"),window.addEventListener("keydown",(function e(t){"27"===t.code&&(modal.close(),window.removeEventListener("keydown",e))})),e(r("WMajR")).registerHelper("if_eq",(function(e,t,n){return e==t?n.fn(this):n.inverse(this)}))}();
//# sourceMappingURL=index.2036e4ca.js.map
